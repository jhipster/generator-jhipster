<%_ var instanceType = (dto == 'mapstruct') ? entityClass + 'DTO' : entityClass;
    var instanceName = (dto == 'mapstruct') ? entityInstance + 'DTO' : entityInstance;
    var mapper = entityInstance + 'Mapper';
    var entityListToDtoListReference = mapper + '.'+ entityInstancePlural +'To' + entityClass + 'DTOs'; %>
<%_ if (dto == 'mapstruct') { _%>
    @Transactional(readOnly = true)
<%_ } _%>
<%_ if (pagination == 'no') { _%>
    public List<<%= instanceType %>> getAll<%= entityClassPlural %>(<% if (fieldsContainNoOwnerOneToOne) { %>@RequestParam(required = false) String filter<% } %>) {<%- include('get_all_stream_template', {viaService: viaService}); -%>
        log.debug("REST request to get all <%= entityClassPlural %>");
    <%_ if (viaService) { _%>
        List<<%= entityClass %>> <%= entityInstancePlural %> = <%= entityInstance %>Service.findAll();
    <%_ } else { _%>
        List<<%= entityClass %>> <%= entityInstancePlural %> = <%= entityInstance %>Repository.<% if (fieldsContainOwnerManyToMany) { %>findAllWithEagerRelationships<% } else { %>findAll<% } %>();
    <%_ } _%>
        return <% if (dto == 'mapstruct') { %><%= entityListToDtoListReference %>(<%= entityInstancePlural %>)<% } else { %><%= entityInstancePlural %><% } %>;
<%_ } else { _%>
    public ResponseEntity<List<<%= instanceType %>>> getAll<%= entityClassPlural %>(Pageable pageable<% if (fieldsContainNoOwnerOneToOne) { %>, @RequestParam(required = false) String filter<% } %>)
        throws URISyntaxException {<%- include('get_all_stream_template', {viaService: viaService}); -%>
        log.debug("REST request to get a page of <%= entityClassPlural %>");
    <%_ if (viaService) { _%>
        Page<<%= entityClass %>> page = <%= entityInstance %>Service.findAll(pageable);
    <%_ } else { _%>
        Page<<%= entityClass %>> page = <%= entityInstance %>Repository.findAll(pageable);
    <%_ } _%>
        return ResponseEntity.ok()
            .headers(PaginationUtil.generatePaginationHttpHeaders(page, "/api/<%= entityApiUrl %>"))
            .body(<% if (dto == 'mapstruct') { %><%= entityListToDtoListReference %>(page.getContent())<% } else { %>page.getContent()<% } %>);
<%_ } _%>
    }
