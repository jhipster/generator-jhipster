import {
  defineComponent,
<%_ if (enableTranslation && applicationTypeMicroservice) { _%>
  inject,
<%_ } _%>
} from 'vue';
<%_ if (enableTranslation && applicationTypeMicroservice) { _%>
import TranslationService from '@/locale/translation.service';
<%_ } _%>

export default defineComponent({
  name: 'EntitiesMenu',
<%_ if (enableTranslation && applicationTypeMicroservice) { _%>
  setup() {
    const microfrontendI18n = inject('microfrontendI18n', true);
    const translationService = inject<() => TranslationService>('translationService');

    return {
      microfrontendI18n,
      translationService,
    };
  },
  watch: {
    '$i18n.locale': {
      handler() {
        this.loadLanguage();
      },
    },
  },
  created(): void {
    this.loadLanguage();
  },
  methods: {
    loadLanguage() {
      if (this.microfrontendI18n) {
        this.translationService().loadTranslations('<%= frontendAppName %>', '<%= endpointPrefix %>/', I18N_HASH);
      }
    },
  },
<%_ } _%>
});
